{% load static %}
{% load message_card_filters %}

{# Use preview_theme if provided (from AJAX request), otherwise use card's theme with celio as default #}
{% firstof preview_theme card.theme 'celio' as current_theme %}
{% with current_theme=current_theme %}

<style>
/* Font rendering improvements */
* {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

/* Theme Styles */
.card-celio {
    background: linear-gradient(135deg, #0f766e 0%, #064e3b 100%);
    color: white;
    border-color: rgba(20, 184, 166, 0.3);
    box-shadow: 0 25px 50px -12px rgba(20, 184, 166, 0.25);
}
.card-celio .card-header {
    background: rgba(20, 50, 42, 0.9);
    border-color: rgba(20, 184, 166, 0.2);
}
.card-celio .profile-photo {
    background: rgba(20, 50, 42, 0.8);
    border-color: rgba(45, 212, 191, 0.5);
}
.card-celio .field-input {
    background: rgba(20, 50, 42, 0.2);
    border-color: rgba(20, 184, 166, 0.4);
    color: white;
}
.card-celio .field-input::placeholder {
    color: rgba(255, 255, 255, 0.6);
}
.card-celio .action-btn {
    background: rgba(20, 184, 166, 0.2);
    color: white;
    border: 1px solid rgba(20, 184, 166, 0.3);
}
.card-celio .action-btn:hover {
    background: rgba(20, 184, 166, 0.3);
}
.card-celio .theme-btn {
    padding: 4px;
    border: 2px solid transparent;
    border-radius: 8px;
    transition: all 0.2s;
}
.card-celio .theme-btn:hover {
    border-color: rgba(20, 184, 166, 0.5);
}

.card-light {
    background: linear-gradient(135deg, #f8fafc, #e2e8f0, #cbd5e1);
    color: #1e293b;
    border-color: rgba(148, 163, 184, 0.3);
    box-shadow: 0 25px 50px -12px rgba(148, 163, 184, 0.25);
}
.card-light .card-header {
    background: linear-gradient(90deg, #e2e8f0, #cbd5e1);
    border-color: rgba(148, 163, 184, 0.2);
    color: #1e293b;
}
.card-light .profile-photo {
    background: linear-gradient(135deg, #94a3b8, #64748b);
    border-color: rgba(148, 163, 184, 0.5);
    color: white;
}
.card-light .field-input {
    background: #f1f5f9;
    border-color: rgba(148, 163, 184, 0.4);
    color: #1e293b;
}
.card-light .field-input::placeholder {
    color: rgba(30, 41, 59, 0.6);
}
.card-light .action-btn {
    background: rgba(148, 163, 184, 0.2);
    color: #1e293b;
    border: 1px solid rgba(148, 163, 184, 0.3);
}
.card-light .action-btn:hover {
    background: rgba(148, 163, 184, 0.4);
}
.card-light .theme-btn {
    padding: 4px;
    border: 2px solid transparent;
    border-radius: 8px;
    transition: all 0.2s;
}
.card-light .theme-btn:hover {
    border-color: rgba(148, 163, 184, 0.5);
}
.card-light .text-white {
    color: #1e293b !important;
}

.card-dark {
    background: linear-gradient(135deg, #1a0b3d 0%, #0f0f23 100%);
    color: white;
    border-color: rgba(147, 51, 234, 0.3);
    box-shadow: 0 25px 50px -12px rgba(147, 51, 234, 0.25);
}
.card-dark .card-header {
    background: rgba(26, 11, 61, 0.9);
    border-color: rgba(147, 51, 234, 0.2);
}
.card-dark .profile-photo {
    background: rgba(26, 11, 61, 0.8);
    border-color: rgba(196, 181, 253, 0.5);
}
.card-dark .field-input {
    background: rgba(26, 11, 61, 0.8); /* Dark theme background */
    border-color: rgba(147, 51, 234, 0.4);
    color: white;
}
.card-dark .field-input::placeholder {
    color: rgba(255, 255, 255, 0.6);
}

.theme-dark .field-input,
.theme-dark .field-input:focus {
    background-color: rgba(26, 11, 61, 0.8) !important;
    color: white !important;
    border: 1px solid rgba(147, 51, 234, 0.4) !important;
    transition: none !important;
    opacity: 1 !important;
}

.theme-dark .field-input::placeholder {
    color: rgba(255, 255, 255, 0.7) !important;
}

.card-dark .action-btn {
    background: rgba(26, 11, 61, 0.6); /* Dark theme background */
    color: white;
    border: 1px solid rgba(147, 51, 234, 0.3);
}
.card-dark .action-btn:hover {
    background: rgba(26, 11, 61, 0.8); /* Darker on hover */
}
.card-dark .theme-btn {
    padding: 4px;
    border: 2px solid transparent;
    border-radius: 8px;
    transition: all 0.2s;
}
.card-dark .theme-btn:hover {
    border-color: rgba(147, 51, 234, 0.5);
}

.card-purple {
    background: linear-gradient(135deg, #6b46c1 0%, #553c9a 100%);
    color: white;
    border-color: rgba(107, 70, 193, 0.3);
    box-shadow: 0 25px 50px -12px rgba(107, 70, 193, 0.25);
}
.card-purple .card-header {
    background: rgba(107, 70, 193, 0.9);
    border-color: rgba(107, 70, 193, 0.2);
}
.card-purple .profile-photo {
    background: rgba(107, 70, 193, 0.8);
    border-color: rgba(139, 92, 246, 0.5);
}
.card-purple .field-input {
    background: rgba(107, 70, 193, 0.8); /* Purple theme background */
    border-color: rgba(107, 70, 193, 0.4);
    color: white;
}
.card-purple .field-input::placeholder {
    color: rgba(255, 255, 255, 0.6);
}
.card-purple .action-btn {
    background: rgba(107, 70, 193, 0.6); /* Purple theme background */
    color: white;
    border: 1px solid rgba(107, 70, 193, 0.3);
}
.card-purple .action-btn:hover {
    background: rgba(107, 70, 193, 0.8); /* Darker on hover */
}
.card-purple .theme-btn {
    padding: 4px;
    border: 2px solid transparent;
    border-radius: 8px;
    transition: all 0.2s;
}
.card-purple .theme-btn:hover {
    border-color: rgba(107, 70, 193, 0.5);
}

/* Active theme button */
.theme-btn.active {
    border-color: currentColor !important;
    transform: scale(1.1);
}

/* Modular Section Styles */
.form-section {
    border-radius: 8px;
    transition: all 0.2s ease;
}

.section-header {
    padding: 8px 0;
    border-radius: 6px;
    transition: all 0.2s ease;
}

.section-header:hover {
    background: rgba(255, 255, 255, 0.05);
    padding-left: 8px;
    padding-right: 8px;
}

.section-content {
    transition: all 0.3s ease;
    overflow: hidden;
}

.section-chevron {
    transition: transform 0.2s ease;
}

/* Theme Option Buttons */
.theme-option {
    background: rgba(255, 255, 255, 0.05);
    transition: all 0.2s ease;
    cursor: pointer;
}

.theme-option:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-1px);
}

.theme-option.active {
    border-color: currentColor !important;
    background: rgba(255, 255, 255, 0.15);
    transform: scale(1.02);
}

/* Mobile Responsive Improvements */
@media (max-width: 480px) {
    .editable-card {
        width: 100% !important;
        max-width: 380px;
        margin: 0 auto;
    }
    
    .card-header {
        padding: 12px 16px;
    }
    
    .card-body {
        padding: 16px;
        max-height: 380px !important;
    }
    
    .action-btn {
        padding: 8px;
    }
    
    .profile-upload-btn {
        width: 36px;
        height: 36px;
    }
    
    .field-input {
        padding: 12px !important;
        font-size: 16px; /* Prevents zoom on iOS */
    }
    
    .theme-option {
        padding: 8px;
    }
    
    .section-header h3 {
        font-size: 13px;
    }
}

/* Touch-friendly improvements */
@media (hover: none) and (pointer: coarse) {
    .section-header {
        padding: 12px 8px;
    }
    
    .action-btn {
        padding: 12px;
        min-width: 44px;
        min-height: 44px;
    }
    
    .theme-option {
        padding: 12px 8px;
        min-height: 60px;
    }
}

/* Card Container Enhancements */
.editable-card {
    position: relative;
    width: 100%;
    max-width: 450px;
    margin: 0 auto;
    border-radius: 12px;
    overflow: hidden;
    background-color: #e8f5e8;
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
}

/* Ensure card has proper boundaries */
.card-id-container {
    border: 2px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* Light theme specific border */
.card-light.card-id-container {
    border: 2px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

/* Smooth scrolling for card body */
.card-body {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
}

.card-body::-webkit-scrollbar {
    width: 4px;
}

.card-body::-webkit-scrollbar-track {
    background: transparent;
}

.card-body::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 2px;
}

.card-body::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}
</style>

<!-- E-Card with Dynamic Themes -->
<div class="editable-card card-id-container card-{{ current_theme }}" data-theme="{{ current_theme }}" style="border: 2px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
    
    <!-- Header with Centered Logo, Top-Left Buttons, and Top-Right Profile -->
    <div class="card-header p-4 border-b">
        <!-- Top Row: Action Buttons Left, Profile Picture Right -->
        <div class="flex justify-between items-start mb-3">
            <!-- Action Buttons - Top Left -->
            <div class="flex space-x-2">
                <button class="action-btn p-2 rounded-lg transition-all duration-200" title="Share">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                    </svg>
                </button>
                <button class="action-btn p-2 rounded-lg transition-all duration-200" title="Download">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </button>
                <button class="action-btn p-2 rounded-lg transition-all duration-200" title="Print" onclick="window.print()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                    </svg>
                </button>
            </div>
            
            <!-- Profile Picture - Top Right -->
            <button class="profile-upload-btn w-10 h-10 rounded-full border-2 border-white/30 hover:border-white/60 transition-all duration-200 flex items-center justify-center cursor-pointer" title="Upload Profile Picture">
                <svg class="w-5 h-5 text-white/80" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
            </button>
        </div>
        
        <!-- Centered Logo with Gluten Free Passport -->
        <div class="flex justify-center">
            <div class="flex flex-col items-center">
                <div class="flex items-start mb-1">
                    <span class="text-white font-black text-xl tracking-tight">Celio</span>
                    <div class="relative ml-1 mt-1 w-3 h-3 rounded-full flex items-center justify-center" style="background-color: #14b8a6;">
                        <svg class="w-2 h-2 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                </div>
                <div class="text-xs font-medium opacity-90">Gluten-Free Passport</div>
            </div>
        </div>
    </div>
    
    <!-- Card Body -->
    <div class="card-body p-4 overflow-y-auto" style="max-height: 420px;">
        <!-- Essential Info Section -->
        <div class="form-section mb-4">
            <div class="section-header flex items-center justify-between cursor-pointer" data-section="essential">
                <h3 class="text-sm font-semibold opacity-90">Essential Information</h3>
                <svg class="w-4 h-4 transition-transform duration-200 section-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </div>
            <div class="section-content mt-3 space-y-3" data-content="essential">
                <!-- Name Field -->
                <div class="form-field">
                    <label class="block text-xs font-medium mb-1 text-left opacity-80">Full Name</label>
                    <input type="text" class="field-input w-full p-2.5 rounded-lg border text-sm" value="John Traveler" placeholder="Enter your full name">
                </div>
                
                <!-- Condition Field -->
                <div class="form-field">
                    <label class="block text-xs font-medium mb-1 text-left opacity-80">Medical Condition</label>
                    <select class="field-input w-full p-2.5 rounded-lg border text-sm" id="condition-select">
                        <option value="Celiac Disease">Celiac Disease</option>
                        <option value="Wheat Allergy">Wheat Allergy</option>
                        <option value="Gluten Intolerance">Gluten Intolerance</option>
                        <option value="Other">Other (Custom)</option>
                    </select>
                    <input type="text" class="field-input w-full p-2.5 rounded-lg border mt-2 hidden text-sm" id="custom-condition" placeholder="Enter custom condition">
                </div>
            </div>
        </div>
        
        <!-- Message Section -->
        <div class="form-section mb-4">
            <div class="section-header flex items-center justify-between cursor-pointer" data-section="message">
                <h3 class="text-sm font-semibold opacity-90">Message</h3>
                <svg class="w-4 h-4 transition-transform duration-200 section-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </div>
            <div class="section-content mt-3" data-content="message">
                <div class="form-field">
                    <textarea class="field-input w-full p-2.5 rounded-lg border text-sm resize-none" rows="3" id="custom-message" placeholder="Add instructions or additional information...">I have severe celiac disease and require 100% gluten-free food preparation. Even trace amounts can cause serious reactions.</textarea>
                    <div class="text-xs opacity-60 mt-1">This message will be displayed prominently on your card</div>
                </div>
            </div>
        </div>
        
        <!-- Customization Section -->
        <div class="form-section">
            <div class="section-header flex items-center justify-between cursor-pointer" data-section="customization">
                <h3 class="text-sm font-semibold opacity-90">Customization</h3>
                <svg class="w-4 h-4 transition-transform duration-200 section-chevron rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </div>
            <div class="section-content mt-3 space-y-3 hidden" data-content="customization">
                <!-- Language Selection -->
                <div class="form-field">
                    <label class="block text-xs font-medium mb-1 text-left opacity-80">Card Language</label>
                    <select class="field-input w-full p-2.5 rounded-lg border text-sm" id="language-select">
                        <option value="en">üá∫üá∏ English</option>
                        <option value="es">üá™üá∏ Espa√±ol</option>
                        <option value="fr">üá´üá∑ Fran√ßais</option>
                        <option value="de">üá©üá™ Deutsch</option>
                        <option value="it">üáÆüáπ Italiano</option>
                        <option value="pt">üáµüáπ Portugu√™s</option>
                        <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                        <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
                        <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                        <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                        <option value="hi">üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                    </select>
                </div>
                
                <!-- Theme Selection -->
                <div class="form-field">
                    <label class="block text-xs font-medium mb-1 text-left opacity-80">Visual Theme</label>
                    <div class="grid grid-cols-4 gap-2">
                        <button class="theme-option p-2 rounded-lg border-2 border-transparent transition-all duration-200 active" data-theme="celio">
                            <div class="w-full h-6 rounded bg-gradient-to-r from-teal-600 to-emerald-600 mb-1"></div>
                            <div class="text-xs font-medium">Celio</div>
                        </button>
                        <button class="theme-option p-2 rounded-lg border-2 border-transparent transition-all duration-200" data-theme="light">
                            <div class="w-full h-6 rounded bg-gradient-to-r from-gray-200 to-gray-300 mb-1"></div>
                            <div class="text-xs font-medium">Light</div>
                        </button>
                        <button class="theme-option p-2 rounded-lg border-2 border-transparent transition-all duration-200" data-theme="dark">
                            <div class="w-full h-6 rounded bg-gradient-to-r from-gray-800 to-gray-900 mb-1"></div>
                            <div class="text-xs font-medium">Dark</div>
                        </button>
                        <button class="theme-option p-2 rounded-lg border-2 border-transparent transition-all duration-200" data-theme="purple">
                            <div class="w-full h-6 rounded bg-gradient-to-r from-purple-600 to-purple-700 mb-1"></div>
                            <div class="text-xs font-medium">Purple</div>
                        </button>
                    </div>
                    <select class="field-input w-full p-2.5 rounded-lg border text-sm hidden" id="theme-select">
                        <option value="celio">Celio (Teal/Emerald)</option>
                        <option value="light">Light (Gray/White)</option>
                        <option value="dark">Dark (Gray/Black)</option>
                        <option value="purple">Purple (Deep Purple)</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    
    <!-- QR Code Section -->
    {% if qr_code_url %}
    <div class="qr-code-section p-3 border-t text-center">
        <h4 class="text-xs font-semibold opacity-90 mb-2">Scan for Digital Card</h4>
        <img src="{{ qr_code_url }}" alt="QR Code" class="mx-auto" style="width: 80px; height: 80px;">
        <p class="text-xs opacity-70 mt-1">Scan to view online</p>
    </div>
    {% endif %}
    
    <!-- Footer with Logo -->
     <div class="card-footer p-3 border-t text-center">
         <div class="flex items-center justify-center">
             <span class="font-black text-sm tracking-tight mr-1">Celio</span>
             <div class="w-2 h-2 rounded-full flex items-center justify-center" style="background-color: #14b8a6;">
                 <svg class="w-1 h-1 text-white" fill="currentColor" viewBox="0 0 20 20">
                     <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                 </svg>
             </div>
         </div>
         <div class="text-xs opacity-70 mt-1">E-Card</div>
     </div>
 </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const card = document.querySelector('.editable-card');
    const actionButtons = document.querySelectorAll('.action-btn');
    const nameInput = document.querySelector('input[placeholder="Enter your full name"]');
    const conditionSelect = document.getElementById('condition-select');
    const customConditionInput = document.getElementById('custom-condition');
    const languageSelect = document.getElementById('language-select');
    const messageTextarea = document.getElementById('custom-message');
    const themeSelect = document.getElementById('theme-select');
    const themeOptions = document.querySelectorAll('.theme-option');
    const sectionHeaders = document.querySelectorAll('.section-header');
    
    // Collapsible sections functionality
    sectionHeaders.forEach(header => {
        header.addEventListener('click', function() {
            const sectionName = this.dataset.section;
            const content = document.querySelector(`[data-content="${sectionName}"]`);
            const chevron = this.querySelector('.section-chevron');
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                chevron.classList.remove('rotate-180');
            } else {
                content.classList.add('hidden');
                chevron.classList.add('rotate-180');
            }
        });
    });
    
    // Theme selection with visual buttons
    themeOptions.forEach(option => {
        option.addEventListener('click', function() {
            const theme = this.dataset.theme;
            
            // Update visual selection
            themeOptions.forEach(opt => opt.classList.remove('active'));
            this.classList.add('active');
            
            // Update hidden select and card theme
            themeSelect.value = theme;

            // Remove all possible theme classes
            const themes = ['celio', 'light', 'dark', 'purple', 'pastel', 'medical', 'luxury'];
            themes.forEach(t => {
                card.classList.remove(`message-card-theme-${t}`);
                card.classList.remove(`card-${t}`);
            });

            // Add the new theme class
            card.classList.add(`card-${theme}`);
            card.dataset.theme = theme;
            
            // Update card border and shadow based on theme
            if (theme === 'light') {
                card.style.border = '2px solid rgba(0, 0, 0, 0.1)';
                card.style.boxShadow = '0 8px 32px rgba(0, 0, 0, 0.1)';
            } else {
                card.style.border = '2px solid rgba(255, 255, 255, 0.2)';
                card.style.boxShadow = '0 8px 32px rgba(0, 0, 0, 0.3)';
            }
        });
    });
    
    // Profile elements removed for space optimization
    
    // Language translations for messages
    const translations = {
        en: {
            'gluten-free-passport': 'Gluten-Free Passport',
            'e-card': 'E-Card',
            'medical-card': 'E-Card',
            'celiac-message': 'I have severe celiac disease and require 100% gluten-free food preparation. Even trace amounts can cause serious reactions.',
            'wheat-allergy-message': 'I have a severe wheat allergy. Please ensure no wheat products or cross-contamination with wheat.',
            'gluten-intolerance-message': 'I have gluten intolerance and require gluten-free food preparation to avoid digestive issues.',
            'allergy-message': 'I have severe food allergies. Please ensure no cross-contamination with allergens.',
            'contact': 'Contact',
            'medical-alert': 'MEDICAL ALERT'
        },
        es: {
            'gluten-free-passport': 'Pasaporte Sin Gluten',
            'e-card': 'Tarjeta-E',
            'medical-card': 'Tarjeta M√©dica',
            'celiac-message': 'Tengo enfermedad cel√≠aca severa y requiero preparaci√≥n 100% libre de gluten. Incluso cantidades m√≠nimas pueden causar reacciones graves.',
            'wheat-allergy-message': 'Tengo alergia severa al trigo. Por favor aseg√∫rese de que no haya productos de trigo o contaminaci√≥n cruzada con trigo.',
            'gluten-intolerance-message': 'Tengo intolerancia al gluten y requiero preparaci√≥n libre de gluten para evitar problemas digestivos.',
            'allergy-message': 'Tengo alergias alimentarias severas. Por favor aseg√∫rese de que no haya contaminaci√≥n cruzada con al√©rgenos.',
            'contact': 'Contacto',
            'medical-alert': 'ALERTA M√âDICA'
        },
        fr: {
            'gluten-free-passport': 'Passeport Sans Gluten',
            'e-card': 'Carte-E',
            'medical-card': 'Carte M√©dicale',
            'celiac-message': 'J\'ai une maladie c≈ìliaque s√©v√®re et j\'ai besoin d\'une pr√©paration 100% sans gluten. M√™me des traces peuvent causer des r√©actions graves.',
            'wheat-allergy-message': 'J\'ai une allergie s√©v√®re au bl√©. Veuillez vous assurer qu\'il n\'y a pas de produits de bl√© ou de contamination crois√©e avec le bl√©.',
            'gluten-intolerance-message': 'J\'ai une intol√©rance au gluten et j\'ai besoin d\'une pr√©paration sans gluten pour √©viter les probl√®mes digestifs.',
            'allergy-message': 'J\'ai des allergies alimentaires s√©v√®res. Veuillez vous assurer qu\'il n\'y a pas de contamination crois√©e avec des allerg√®nes.',
            'contact': 'Contact',
            'medical-alert': 'ALERTE M√âDICALE'
        },
        de: {
            'gluten-free-passport': 'Glutenfreier Pass',
            'e-card': 'E-Karte',
            'medical-card': 'Medizinkarte',
            'celiac-message': 'Ich habe schwere Z√∂liakie und ben√∂tige 100% glutenfreie Zubereitung. Selbst Spuren k√∂nnen schwere Reaktionen verursachen.',
            'wheat-allergy-message': 'Ich habe eine schwere Weizenallergie. Bitte stellen Sie sicher, dass keine Weizenprodukte oder Kreuzkontamination mit Weizen vorhanden sind.',
            'gluten-intolerance-message': 'Ich habe eine Glutenunvertr√§glichkeit und ben√∂tige glutenfreie Zubereitung, um Verdauungsprobleme zu vermeiden.',
            'allergy-message': 'Ich habe schwere Nahrungsmittelallergien. Bitte stellen Sie sicher, dass keine Kreuzkontamination mit Allergenen stattfindet.',
            'contact': 'Kontakt',
            'medical-alert': 'MEDIZINISCHER ALARM'
        },
        it: {
            'gluten-free-passport': 'Passaporto Senza Glutine',
            'e-card': 'E-Card',
            'medical-card': 'Carta Medica',
            'celiac-message': 'Ho la celiachia grave e richiedo preparazione 100% senza glutine. Anche tracce possono causare reazioni gravi.',
            'wheat-allergy-message': 'Ho un\'allergia grave al grano. Si prega di assicurarsi che non ci siano prodotti di grano o contaminazione incrociata con il grano.',
            'gluten-intolerance-message': 'Ho intolleranza al glutine e richiedo preparazione senza glutine per evitare problemi digestivi.',
            'allergy-message': 'Ho allergie alimentari gravi. Si prega di assicurarsi che non ci sia contaminazione incrociata con allergeni.',
            'contact': 'Contatto',
            'medical-alert': 'ALLERTA MEDICA'
        },
        pt: {
            'gluten-free-passport': 'Passaporte Sem Gl√∫ten',
            'e-card': 'Cart√£o-E',
            'medical-card': 'Cart√£o M√©dico',
            'celiac-message': 'Tenho doen√ßa cel√≠aca grave e preciso de prepara√ß√£o 100% sem gl√∫ten. Mesmo quantidades m√≠nimas podem causar rea√ß√µes graves.',
            'wheat-allergy-message': 'Tenho alergia grave ao trigo. Por favor, certifique-se de que n√£o h√° produtos de trigo ou contamina√ß√£o cruzada com trigo.',
            'gluten-intolerance-message': 'Tenho intoler√¢ncia ao gl√∫ten e preciso de prepara√ß√£o sem gl√∫ten para evitar problemas digestivos.',
            'allergy-message': 'Tenho alergias alimentares graves. Por favor, certifique-se de que n√£o h√° contamina√ß√£o cruzada com al√©rgenos.',
            'contact': 'Contato',
            'medical-alert': 'ALERTA M√âDICO'
        },
        ja: {
            'gluten-free-passport': '„Ç∞„É´„ÉÜ„É≥„Éï„É™„Éº„Éë„Çπ„Éù„Éº„Éà',
            'e-card': 'E„Ç´„Éº„Éâ',
            'medical-card': 'ÂåªÁôÇ„Ç´„Éº„Éâ',
            'celiac-message': 'ÈáçÂ∫¶„ÅÆ„Çª„É™„Ç¢„ÉÉ„ÇØÁóÖ„Åå„ÅÇ„Çä„ÄÅ100%„Ç∞„É´„ÉÜ„É≥„Éï„É™„Éº„ÅÆË™øÁêÜ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇÂæÆÈáè„Åß„ÇÇÈáçÁØ§„Å™ÂèçÂøú„ÇíËµ∑„Åì„ÅôÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
            'wheat-allergy-message': 'ÈáçÂ∫¶„ÅÆÂ∞èÈ∫¶„Ç¢„É¨„É´„ÇÆ„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂ∞èÈ∫¶Ë£ΩÂìÅ„ÇÑÂ∞èÈ∫¶„Å®„ÅÆ‰∫§Â∑ÆÊ±öÊüì„Åå„Å™„ÅÑ„Åì„Å®„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
            'gluten-intolerance-message': '„Ç∞„É´„ÉÜ„É≥‰∏çËÄêÁóá„Åå„ÅÇ„Çä„ÄÅÊ∂àÂåñÂô®Á≥ª„ÅÆÂïèÈ°å„ÇíÈÅø„Åë„Çã„Åü„ÇÅ„Å´„Ç∞„É´„ÉÜ„É≥„Éï„É™„Éº„ÅÆË™øÁêÜ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ',
            'allergy-message': 'ÈáçÂ∫¶„ÅÆÈ£üÁâ©„Ç¢„É¨„É´„ÇÆ„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Ç¢„É¨„É´„Ç≤„É≥„Å®„ÅÆ‰∫§Â∑ÆÊ±öÊüì„Åå„Å™„ÅÑ„Åì„Å®„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
            'contact': 'ÈÄ£Áµ°ÂÖà',
            'medical-alert': 'ÂåªÁôÇË≠¶Âëä'
        },
        zh: {
            'gluten-free-passport': 'Êó†È∫∏Ë¥®Êä§ÁÖß',
            'e-card': 'ÁîµÂ≠êÂç°',
            'medical-card': 'ÂåªÁñóÂç°',
            'celiac-message': 'ÊàëÊÇ£Êúâ‰∏•ÈáçÁöÑ‰π≥Á≥úÊ≥ªÔºåÈúÄË¶Å100%Êó†È∫∏Ë¥®È£üÁâ©Âà∂Â§á„ÄÇÂç≥‰ΩøÂæÆÈáè‰πüÂèØËÉΩÂºïËµ∑‰∏•ÈáçÂèçÂ∫î„ÄÇ',
            'wheat-allergy-message': 'ÊàëÊúâ‰∏•ÈáçÁöÑÂ∞èÈ∫¶ËøáÊïè„ÄÇËØ∑Á°Æ‰øùÊ≤°ÊúâÂ∞èÈ∫¶‰∫ßÂìÅÊàñ‰∏éÂ∞èÈ∫¶ÁöÑ‰∫§ÂèâÊ±°Êüì„ÄÇ',
            'gluten-intolerance-message': 'ÊàëÊúâÈ∫∏Ë¥®‰∏çËÄêÂèóÔºåÈúÄË¶ÅÊó†È∫∏Ë¥®Âà∂Â§á‰ª•ÈÅøÂÖçÊ∂àÂåñÈóÆÈ¢ò„ÄÇ',
            'allergy-message': 'ÊàëÊúâ‰∏•ÈáçÁöÑÈ£üÁâ©ËøáÊïè„ÄÇËØ∑Á°Æ‰øùÊ≤°ÊúâËøáÊïèÂéü‰∫§ÂèâÊ±°Êüì„ÄÇ',
            'contact': 'ËÅîÁ≥ª‰∫∫',
            'medical-alert': 'ÂåªÁñóË≠¶Êä•'
        },
        ko: {
            'gluten-free-passport': 'Í∏ÄÎ£®ÌÖê ÌîÑÎ¶¨ Ïó¨Í∂å',
            'e-card': 'Ï†ÑÏûê Ïπ¥Îìú',
            'medical-card': 'ÏùòÎ£å Ïπ¥Îìú',
            'celiac-message': 'Ï†ÄÎäî Ïã¨Í∞ÅÌïú ÏÖÄÎ¶¨ÏïÖÎ≥ëÏùÑ ÏïìÍ≥† ÏûàÏñ¥ÏÑú 100% Í∏ÄÎ£®ÌÖê ÌîÑÎ¶¨ Ï°∞Î¶¨Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§. ÎØ∏ÎüâÏù¥ÎùºÎèÑ Ïã¨Í∞ÅÌïú Î∞òÏùëÏùÑ ÏùºÏúºÌÇ¨ Ïàò ÏûàÏäµÎãàÎã§.',
            'wheat-allergy-message': 'Ï†ÄÎäî Ïã¨Í∞ÅÌïú Î∞Ä ÏïåÎ†àÎ•¥Í∏∞Í∞Ä ÏûàÏäµÎãàÎã§. Î∞Ä Ï†úÌíàÏù¥ÎÇò Î∞ÄÍ≥ºÏùò ÍµêÏ∞® Ïò§ÏóºÏù¥ ÏóÜÎèÑÎ°ù Ìï¥Ï£ºÏÑ∏Ïöî.',
            'gluten-intolerance-message': 'Ï†ÄÎäî Í∏ÄÎ£®ÌÖê Î∂àÎÇ¥Ï¶ùÏù¥ ÏûàÏñ¥ÏÑú ÏÜåÌôî Î¨∏Ï†úÎ•º ÌîºÌïòÍ∏∞ ÏúÑÌï¥ Í∏ÄÎ£®ÌÖê ÌîÑÎ¶¨ Ï°∞Î¶¨Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.',
            'allergy-message': 'Ï†ÄÎäî Ïã¨Í∞ÅÌïú ÏùåÏãù ÏïåÎ†àÎ•¥Í∏∞Í∞Ä ÏûàÏäµÎãàÎã§. ÏïåÎ†àÎ•¥Í≤êÍ≥ºÏùò ÍµêÏ∞® Ïò§ÏóºÏù¥ ÏóÜÎèÑÎ°ù Ìï¥Ï£ºÏÑ∏Ïöî.',
            'contact': 'Ïó∞ÎùΩÏ≤ò',
            'medical-alert': 'ÏùòÎ£å Í≤ΩÎ≥¥'
        },
        ar: {
            'gluten-free-passport': 'ÿ¨Ÿàÿßÿ≤ ÿ≥ŸÅÿ± ÿÆÿßŸÑŸä ŸÖŸÜ ÿßŸÑÿ∫ŸÑŸàÿ™ŸäŸÜ',
            'e-card': 'ÿ®ÿ∑ÿßŸÇÿ© ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿ©',
            'medical-card': 'ÿ®ÿ∑ÿßŸÇÿ© ÿ∑ÿ®Ÿäÿ©',
            'celiac-message': 'ÿ£ÿπÿßŸÜŸä ŸÖŸÜ ŸÖÿ±ÿ∂ ÿßŸÑÿ≥ŸäŸÑŸäÿßŸÉ ÿßŸÑÿ¥ÿØŸäÿØ Ÿàÿ£ÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ ÿ™ÿ≠ÿ∂Ÿäÿ± ÿÆÿßŸÑŸä ŸÖŸÜ ÿßŸÑÿ∫ŸÑŸàÿ™ŸäŸÜ ÿ®ŸÜÿ≥ÿ®ÿ© 100%. ÿ≠ÿ™Ÿâ ÿßŸÑŸÉŸÖŸäÿßÿ™ ÿßŸÑÿ∂ÿ¶ŸäŸÑÿ© ŸäŸÖŸÉŸÜ ÿ£ŸÜ ÿ™ÿ≥ÿ®ÿ® ÿ±ÿØŸàÿØ ŸÅÿπŸÑ ÿ¥ÿØŸäÿØÿ©.',
            'wheat-allergy-message': 'ŸÑÿØŸä ÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿ¥ÿØŸäÿØÿ© ŸÖŸÜ ÿßŸÑŸÇŸÖÿ≠. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿπÿØŸÖ Ÿàÿ¨ŸàÿØ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑŸÇŸÖÿ≠ ÿ£Ÿà ÿßŸÑÿ™ŸÑŸàÿ´ ÿßŸÑŸÖÿ™ÿ®ÿßÿØŸÑ ŸÖÿπ ÿßŸÑŸÇŸÖÿ≠.',
            'gluten-intolerance-message': 'ŸÑÿØŸä ÿπÿØŸÖ ÿ™ÿ≠ŸÖŸÑ ŸÑŸÑÿ∫ŸÑŸàÿ™ŸäŸÜ Ÿàÿ£ÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ ÿ™ÿ≠ÿ∂Ÿäÿ± ÿÆÿßŸÑŸä ŸÖŸÜ ÿßŸÑÿ∫ŸÑŸàÿ™ŸäŸÜ ŸÑÿ™ÿ¨ŸÜÿ® ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸáÿ∂ŸÖ.',
            'allergy-message': 'ŸÑÿØŸä ÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ÿ¥ÿØŸäÿØÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿπÿØŸÖ Ÿàÿ¨ŸàÿØ ÿ™ŸÑŸàÿ´ ŸÖÿ™ÿ®ÿßÿØŸÑ ŸÖÿπ ŸÖÿ≥ÿ®ÿ®ÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ≥Ÿäÿ©.',
            'contact': 'ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ',
            'medical-alert': 'ÿ™ŸÜÿ®ŸäŸá ÿ∑ÿ®Ÿä'
        },
        ru: {
            'gluten-free-passport': '–ë–µ–∑–≥–ª—é—Ç–µ–Ω–æ–≤—ã–π –ø–∞—Å–ø–æ—Ä—Ç',
            'e-card': '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞',
            'medical-card': '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞',
            'celiac-message': '–£ –º–µ–Ω—è —Ç—è–∂–µ–ª–∞—è —Ü–µ–ª–∏–∞–∫–∏—è, –∏ –º–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è 100% –±–µ–∑–≥–ª—é—Ç–µ–Ω–æ–≤–æ–µ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ. –î–∞–∂–µ —Å–ª–µ–¥—ã –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å —Å–µ—Ä—å–µ–∑–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏.',
            'wheat-allergy-message': '–£ –º–µ–Ω—è —Ç—è–∂–µ–ª–∞—è –∞–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –ø—à–µ–Ω–∏—Ü—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ –ø—à–µ–Ω–∏—Ü—ã –∏–ª–∏ –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–Ω–æ–≥–æ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –ø—à–µ–Ω–∏—Ü–µ–π.',
            'gluten-intolerance-message': '–£ –º–µ–Ω—è –Ω–µ–ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –≥–ª—é—Ç–µ–Ω–∞, –∏ –º–Ω–µ –Ω—É–∂–Ω–æ –±–µ–∑–≥–ª—é—Ç–µ–Ω–æ–≤–æ–µ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ–º.',
            'allergy-message': '–£ –º–µ–Ω—è —Ç—è–∂–µ–ª—ã–µ –ø–∏—â–µ–≤—ã–µ –∞–ª–ª–µ—Ä–≥–∏–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–Ω–æ–≥–æ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –∞–ª–ª–µ—Ä–≥–µ–Ω–∞–º–∏.',
            'contact': '–ö–æ–Ω—Ç–∞–∫—Ç',
            'medical-alert': '–ú–ï–î–ò–¶–ò–ù–°–ö–û–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï'
        },
        hi: {
            'gluten-free-passport': '‡§ó‡•ç‡§≤‡•Ç‡§ü‡•á‡§®-‡§´‡•ç‡§∞‡•Ä ‡§™‡§æ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü',
            'e-card': '‡§à-‡§ï‡§æ‡§∞‡•ç‡§°',
            'medical-card': '‡§Æ‡•á‡§°‡§ø‡§ï‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§°',
            'celiac-message': '‡§Æ‡•Å‡§ù‡•á ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§∏‡•Ä‡§≤‡§ø‡§è‡§ï ‡§∞‡•ã‡§ó ‡§π‡•à ‡§î‡§∞ ‡§Æ‡•Å‡§ù‡•á 100% ‡§ó‡•ç‡§≤‡•Ç‡§ü‡•á‡§®-‡§´‡•ç‡§∞‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§•‡•ã‡§°‡§º‡•Ä ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§≠‡•Ä ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§æ ‡§ï‡§æ‡§∞‡§£ ‡§¨‡§® ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§',
            'wheat-allergy-message': '‡§Æ‡•Å‡§ù‡•á ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§ó‡•á‡§π‡•Ç‡§Ç ‡§è‡§≤‡§∞‡•ç‡§ú‡•Ä ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•ã‡§à ‡§ó‡•á‡§π‡•Ç‡§Ç ‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§Ø‡§æ ‡§ó‡•á‡§π‡•Ç‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡•ç‡§∞‡•â‡§∏-‡§∏‡§Ç‡§¶‡•Ç‡§∑‡§£ ‡§® ‡§π‡•ã‡•§',
            'gluten-intolerance-message': '‡§Æ‡•Å‡§ù‡•á ‡§ó‡•ç‡§≤‡•Ç‡§ü‡•á‡§® ‡§Ö‡§∏‡§π‡§®‡§∂‡•Ä‡§≤‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§™‡§æ‡§ö‡§® ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§¨‡§ö‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ó‡•ç‡§≤‡•Ç‡§ü‡•á‡§®-‡§´‡•ç‡§∞‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§',
            'allergy-message': '‡§Æ‡•Å‡§ù‡•á ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§ñ‡§æ‡§¶‡•ç‡§Ø ‡§è‡§≤‡§∞‡•ç‡§ú‡•Ä ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§è‡§≤‡§∞‡•ç‡§ú‡•á‡§® ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡•ã‡§à ‡§ï‡•ç‡§∞‡•â‡§∏-‡§∏‡§Ç‡§¶‡•Ç‡§∑‡§£ ‡§® ‡§π‡•ã‡•§',
            'contact': '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï',
            'medical-alert': '‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä'
        }
    };
    
    // Set initial theme and ensure visual consistency
    const currentTheme = card.dataset.theme || 'celio';
    themeSelect.value = currentTheme;
    
    // Apply initial theme class to the card
    card.classList.add(`message-card-theme-${currentTheme}`);

    // Initialize visual theme selection
    themeOptions.forEach(opt => opt.classList.remove('active'));
    const initialThemeOption = document.querySelector(`[data-theme="${currentTheme}"]`);
    if (initialThemeOption) initialThemeOption.classList.add('active');
    
    // Initialize with current language and condition
    updateAllTextElements();
    
    // Set up initial textarea height
    messageTextarea.style.height = 'auto';
    messageTextarea.style.height = messageTextarea.scrollHeight + 'px';
    
    // Add CSS transitions for smooth animations
    const style = document.createElement('style');
    style.textContent = `
        .field-input {
            transition: all 0.2s ease !important;
        }
        .editable-card {
            transition: all 0.3s ease !important;
        }
        .card-header .text-xs,
        .card-footer .text-xs {
            transition: opacity 0.2s ease !important;
        }
        #custom-message {
            transition: opacity 0.2s ease, height 0.2s ease !important;
        }
    `;
    document.head.appendChild(style);
    
    // Define condition-to-language mapping based on awareness and support
    const conditionLanguageMapping = {
        'Celiac Disease': 'pt', // Portugal has excellent celiac awareness and gluten-free support
        'Wheat Allergy': 'en', // English-speaking countries have good allergy awareness
        'Gluten Intolerance': 'es' // Spain has good gluten-free support (4/5)
    };
    
    // Function to update all text elements dynamically
    function updateAllTextElements() {
        const selectedLang = languageSelect.value;
        const trans = translations[selectedLang] || translations.en;
        
        // Update card text elements with smooth transitions
        const passportText = document.querySelector('.card-header .text-xs');
        const footerText = document.querySelector('.card-footer .text-xs');
        
        if (passportText) {
            passportText.style.opacity = '0.5';
            setTimeout(() => {
                passportText.textContent = trans['gluten-free-passport'];
                passportText.style.opacity = '1';
            }, 100);
        }
        
        if (footerText) {
            footerText.style.opacity = '0.5';
            setTimeout(() => {
                footerText.textContent = trans['e-card'];
                footerText.style.opacity = '1';
            }, 100);
        }
        
        // Update message based on current condition
        updateMessageForCondition();
    }
    
    // Function to update message based on condition and language
    function updateMessageForCondition() {
        const condition = conditionSelect.value;
        const selectedLang = languageSelect.value;
        const trans = translations[selectedLang] || translations.en;
        
        let newMessage = '';
        if (condition === 'Celiac Disease') {
            newMessage = trans['celiac-message'];
        } else if (condition === 'Wheat Allergy') {
            newMessage = trans['wheat-allergy-message'];
        } else if (condition === 'Gluten Intolerance') {
            newMessage = trans['gluten-intolerance-message'];
        } else if (condition === 'Other') {
            newMessage = trans['allergy-message'];
        }
        
        if (newMessage && messageTextarea.value !== newMessage) {
            // Smooth transition for message update
            messageTextarea.style.opacity = '0.5';
            setTimeout(() => {
                messageTextarea.value = newMessage;
                messageTextarea.style.opacity = '1';
                // Auto-resize textarea
                messageTextarea.style.height = 'auto';
                messageTextarea.style.height = messageTextarea.scrollHeight + 'px';
            }, 150);
        }
    }
    
    // Handle custom condition input with live updates
    conditionSelect.addEventListener('change', function() {
        if (this.value === 'Other') {
            customConditionInput.classList.remove('hidden');
            customConditionInput.focus();
        } else {
            customConditionInput.classList.add('hidden');
            
            // Instantly update message for new condition
            updateMessageForCondition();
            
            // Optional: Suggest language based on condition (but don't force it)
            const suggestedLang = conditionLanguageMapping[this.value];
            if (suggestedLang && languageSelect.value !== suggestedLang) {
                console.log(`Suggestion: ${this.value} is commonly supported in ${suggestedLang} regions`);
            }
        }
    });
    
    // Handle custom condition input with live updates
    customConditionInput.addEventListener('input', function() {
        if (conditionSelect.value === 'Other') {
            // Update message for custom condition instantly
            updateMessageForCondition();
        }
    });
    
    // Theme switching with smooth transitions
    themeSelect.addEventListener('change', function() {
        const newTheme = this.value;
        
        // Add transition effect
        card.style.transition = 'all 0.3s ease';
        
        // Remove old theme classes
        const themes = ['celio', 'light', 'dark', 'purple'];
        themes.forEach(t => card.classList.remove(`card-${t}`));
        
        // Add new theme class
        card.classList.add(`card-${newTheme}`);
        card.dataset.theme = newTheme;
        
        // Update visual theme selection
        themeOptions.forEach(opt => opt.classList.remove('active'));
        const selectedOption = document.querySelector(`[data-theme="${newTheme}"]`);
        if (selectedOption) selectedOption.classList.add('active');
    });
    
    // Enhanced language switching with live updates
    languageSelect.addEventListener('change', function() {
        // Instantly update all text elements
        updateAllTextElements();
    });
    
    // Add live textarea auto-resize
    messageTextarea.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';
    });
    
    // Add smooth transitions to all form elements
    const formElements = document.querySelectorAll('.field-input');
    formElements.forEach(element => {
        element.style.transition = 'all 0.2s ease';
        
        element.addEventListener('focus', function() {
            this.style.transform = 'scale(1.02)';
            this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
        });
        
        element.addEventListener('blur', function() {
            this.style.transform = 'scale(1)';
            this.style.boxShadow = 'none';
        });
    });
    
    // Profile display elements removed for space optimization
    
    // Action button handlers
    actionButtons.forEach(button => {
        button.addEventListener('click', function() {
            const title = this.getAttribute('title');
            
            switch(title) {
                case 'Share':
                    if (navigator.share) {
                        navigator.share({
                            title: 'My E-Card',
                            text: 'Check out my Celio E-Card',
                            url: window.location.href
                        });
                    } else {
                        navigator.clipboard.writeText(window.location.href).then(() => {
                            alert('Link copied to clipboard!');
                        });
                    }
                    break;
                    
                case 'Download':
                    // Create mobile-friendly download URL
                    const currentLang = languageSelect.value;
                    const currentTheme = card.dataset.theme;
                    
                    // Build download URL for mobile format
                    const downloadUrl = new URL('{% url "message_cards:download_card" %}', window.location.origin);
                    downloadUrl.searchParams.set('format', 'mobile');
                    downloadUrl.searchParams.set('lang', currentLang);
                    downloadUrl.searchParams.set('theme', currentTheme);
                    
                    // Create a temporary link element for auto-download
                    const link = document.createElement('a');
                    link.href = downloadUrl.toString();
                    link.download = `celio-card-${currentLang}-${currentTheme}.html`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    break;
                    

            }
        });
    });
    

});
</script>

{% endwith %}
